(function(){"use strict";var e={4070:function(e,n,t){var o=t(9242),r=t(3396);const a={class:"container"};function s(e,n,t,o,s,i){const l=(0,r.up)("NavBar"),c=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l),(0,r._)("div",a,[(0,r.Wm)(c)])],64)}var i=t(7139);const l={class:"navbar"},c={class:"navbar_menu flex"},u={class:"cursor-pointer"},p=(0,r.Uk)("Home"),d={key:0,class:"flex"},f={class:"cursor-pointer"},m=(0,r.Uk)("Login"),h={class:"cursor-pointer"},v=(0,r.Uk)("Map"),g={class:"cursor-pointer"},w=(0,r.Uk)("Profile");function _(e,n,t,o,a,s){const _=(0,r.up)("router-link"),b=(0,r.up)("CloseIcon"),y=(0,r.up)("MenuIcon");return(0,r.wg)(),(0,r.iD)("nav",l,[(0,r._)("div",c,[(0,r._)("ul",{class:(0,i.C_)({navbar_menu_mobile:o.showMobMenu,navbar_menu_pc:!o.showMobMenu})},[(0,r._)("li",u,[(0,r.Wm)(_,{to:"/"},{default:(0,r.w5)((()=>[p])),_:1})]),o.user?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("li",f,[(0,r.Wm)(_,{to:"/login"},{default:(0,r.w5)((()=>[m])),_:1})])])),o.user?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,i.C_)({flex:!o.showMobMenu})},[(0,r._)("li",h,[(0,r.Wm)(_,{to:"/map"},{default:(0,r.w5)((()=>[v])),_:1})]),(0,r._)("li",g,[(0,r.Wm)(_,{to:"/profile"},{default:(0,r.w5)((()=>[w])),_:1})]),(0,r._)("li",null,[(0,r._)("button",{onClick:n[0]||(n[0]=(...e)=>o.handleLogout&&o.handleLogout(...e)),class:"cursor-pointer"},"Logout")]),(0,r._)("li",null,[(0,r._)("span",null,"Hi, "+(0,i.zw)(o.user.name),1)])],2)):(0,r.kq)("",!0)],2),(0,r._)("div",{onClick:n[1]||(n[1]=(...e)=>o.toggleMenu&&o.toggleMenu(...e)),class:"navbar_hamburger"},[o.showMobMenu?((0,r.wg)(),(0,r.j4)(b,{key:0,class:"navbar_icon cursor-pointer"})):((0,r.wg)(),(0,r.j4)(y,{key:1,class:"navbar_icon cursor-pointer"}))])])])}var b=t(4870),y=t(65),k=t(2483);const I={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},M=(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1),D=[M];function C(e,n){return(0,r.wg)(),(0,r.iD)("svg",I,D)}var U=t(89);const x={},j=(0,U.Z)(x,[["render",C]]);var z=j;const H={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},q=(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),O=[q];function Z(e,n){return(0,r.wg)(),(0,r.iD)("svg",H,O)}const T={},L=(0,U.Z)(T,[["render",Z]]);var S=L,P=t(6265),$=t.n(P);const A="";$().create({baseURL:A});const F=$().create({baseURL:A,headers:{"Content-Type":"application/json","Access-Control-Allow-Credentials":!0},withCredentials:!0}),R=async()=>{const{data:e}=await F.get("api/auth/user");return e.user},W=async()=>{const{data:e}=await F.get("api/auth/userfb");return e.fbinfo},B=async()=>{await F.get("api/auth/logout")},G=async()=>{await F.get("api/auth/unbind")};var V={components:{MenuIcon:z,CloseIcon:S},setup(){const e=(0,y.oR)(),n=(0,k.tv)(),t=(0,b.iH)(!1),o=async()=>{await B(),e.commit("setUser",null),n.push("/")},a=()=>{t.value=!t.value};return{user:(0,r.Fl)((()=>e.state.user)),showMobMenu:t,handleLogout:o,toggleMenu:a}}};const E=(0,U.Z)(V,[["render",_],["__scopeId","data-v-faad50e0"]]);var N=E,J={components:{NavBar:N}};const K=(0,U.Z)(J,[["render",s],["__scopeId","data-v-2e1b55f2"]]);var Q=K;const X=e=>((0,r.dD)("data-v-87126c7c"),e=e(),(0,r.Cn)(),e),Y={class:"home flex"},ee=X((()=>(0,r._)("h1",null,"Home",-1))),ne=[ee];function te(e,n,t,o,a,s){return(0,r.wg)(),(0,r.iD)("div",Y,ne)}var oe={name:"HomeView",components:{}};const re=(0,U.Z)(oe,[["render",te],["__scopeId","data-v-87126c7c"]]);var ae=re;const se=e=>((0,r.dD)("data-v-da23927a"),e=e(),(0,r.Cn)(),e),ie={class:"login flex"},le=se((()=>(0,r._)("h1",null,"Login",-1))),ce=["href"];function ue(e,n,t,o,a,s){const l=(0,r.up)("ToastAlert");return(0,r.wg)(),(0,r.iD)("div",ie,[le,o.errorMsg?((0,r.wg)(),(0,r.j4)(l,{key:0},{default:(0,r.w5)((()=>[(0,r._)("p",null,(0,i.zw)(o.errorMsg),1)])),_:1})):(0,r.kq)("",!0),(0,r._)("a",{class:"btn",href:o.href},"Google Login",8,ce)])}const pe={class:"toast-alert-container"},de={class:"toast-alert"};function fe(e,n){return(0,r.wg)(),(0,r.iD)("div",pe,[(0,r._)("div",de,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])])}const me={},he=(0,U.Z)(me,[["render",fe],["__scopeId","data-v-6075da4c"]]);var ve=he;function ge(){const e="https://accounts.google.com/o/oauth2/v2/auth",n={redirect_uri:"https://oauth-maps-vue-app.herokuapp.com/api/auth/sessions/oauth/google",client_id:"431057118212-smdf2hdbkj9ra8g5cghi8envgbr9ptg2.apps.googleusercontent.com",access_type:"offline",response_type:"code",prompt:"consent",scope:["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email"].join(" ")},t=new URLSearchParams(n);return`${e}?${t.toString()}`}var we=ge,_e={components:{ToastAlert:ve},setup(){const e=(0,k.yj)(),n=(0,b.iH)(we()),t=(0,b.iH)(e.query.errorMsg);return(0,r.m0)((()=>{setTimeout((()=>{t.value=null}),2e3)})),{href:n,errorMsg:t}}};const be=(0,U.Z)(_e,[["render",ue],["__scopeId","data-v-da23927a"]]);var ye=be;const ke=e=>((0,r.dD)("data-v-bb636016"),e=e(),(0,r.Cn)(),e),Ie={class:"profile flex"},Me=ke((()=>(0,r._)("h1",null,"Profile",-1))),De={class:"profile_info flex"},Ce=["src"],Ue=["href"],xe={key:1,class:"profile_info flex"};function je(e,n,t,a,s,l){const c=(0,r.up)("ToastAlert");return(0,r.wg)(),(0,r.iD)("div",Ie,[Me,a.errorMsg?((0,r.wg)(),(0,r.j4)(c,{key:0},{default:(0,r.w5)((()=>[(0,r._)("p",null,(0,i.zw)(a.errorMsg),1)])),_:1})):(0,r.kq)("",!0),(0,r._)("div",De,[(0,r.wy)((0,r._)("img",{src:`https://graph.facebook.com/${a.fbUserID}/picture?type=large`,alt:"userpicture"},null,8,Ce),[[o.F8,a.fbUserID]]),a.fbUserID?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn",onClick:n[0]||(n[0]=(...e)=>a.handleUnbind&&a.handleUnbind(...e))}," Unbind Facebook ")):((0,r.wg)(),(0,r.iD)("a",{key:1,class:"btn",href:a.href},"Bind Facebook",8,Ue))]),a.user?((0,r.wg)(),(0,r.iD)("div",xe,[(0,r._)("ul",null,[(0,r._)("li",null,"Gmail: "+(0,i.zw)(a.user.email),1),(0,r._)("li",null,"Google name: "+(0,i.zw)(a.user.name),1)])])):(0,r.kq)("",!0)])}function ze(){const e="https://www.facebook.com/v4.0/dialog/oauth",n={redirect_uri:"https://oauth-maps-vue-app.herokuapp.com/api/auth/sessions/oauth/facebook",client_id:"591219129162188",auth_type:"rerequest",response_type:"code",display:"popup",scope:["email","public_profile"].join(",")},t=new URLSearchParams(n);return`${e}?${t.toString()}`}var He=ze,qe={components:{ToastAlert:ve},setup(){const e=(0,y.oR)(),n=(0,k.tv)(),t=(0,k.yj)(),o=(0,b.iH)(He()),a=(0,b.iH)(null),s=(0,b.iH)(t.query.errorMsg),i=async()=>{const e=await W();e&&(a.value=e.id)};i();const l=async()=>{await G(),n.push({name:"empty"})};return(0,r.m0)((()=>{setTimeout((()=>{s.value=null}),2e3)})),{user:(0,r.Fl)((()=>e.state.user)),fbUserID:a,href:o,errorMsg:s,handleUnbind:l}}};const Oe=(0,U.Z)(qe,[["render",je],["__scopeId","data-v-bb636016"]]);var Ze=Oe;const Te=e=>((0,r.dD)("data-v-14bab944"),e=e(),(0,r.Cn)(),e),Le={class:"map flex"},Se=(0,r.Uk)(" Go to the profile page to bind Facebook to see more content. "),Pe={class:"tracker"},$e=Te((()=>(0,r._)("div",{id:"map"},null,-1)));function Ae(e,n,t,o,a,s){const i=(0,r.up)("router-link"),l=(0,r.up)("SearchZone"),c=(0,r.up)("IPInfo");return(0,r.wg)(),(0,r.iD)("div",Le,[o.fbUserID?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(i,{key:0,to:"/profile"},{default:(0,r.w5)((()=>[Se])),_:1})),(0,r._)("section",Pe,[$e,o.fbUserID?((0,r.wg)(),(0,r.j4)(l,{key:0,onHandleClick:o.getIpInfo},null,8,["onHandleClick"])):(0,r.kq)("",!0),o.ipInfo?((0,r.wg)(),(0,r.j4)(c,{key:1,ipInfo:o.ipInfo},null,8,["ipInfo"])):(0,r.kq)("",!0)])])}var Fe=t(3153),Re=t.n(Fe);const We={class:"searchzone"};function Be(e,n,t,a,s,i){const l=(0,r.up)("SearchIcon");return(0,r.wg)(),(0,r.iD)("div",We,[(0,r._)("form",{onSubmit:n[2]||(n[2]=(0,o.iM)((n=>e.$emit("handleClick",a.queryIp)),["prevent"])),class:"flex"},[(0,r.wy)((0,r._)("input",{class:"search-input",type:"text",placeholder:"Enter your address or leave it empty to get your current position.","onUpdate:modelValue":n[0]||(n[0]=e=>a.queryIp=e)},null,512),[[o.nr,a.queryIp]]),(0,r._)("div",{class:"search-icon cursor-pointer",onClick:n[1]||(n[1]=n=>e.$emit("handleClick",a.queryIp))},[(0,r.Wm)(l)])],32)])}const Ge={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ve=(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),Ee=[Ve];function Ne(e,n){return(0,r.wg)(),(0,r.iD)("svg",Ge,Ee)}const Je={},Ke=(0,U.Z)(Je,[["render",Ne]]);var Qe=Ke,Xe={components:{SearchIcon:Qe},setup(){const e=(0,b.iH)("");return{queryIp:e}}};const Ye=(0,U.Z)(Xe,[["render",Be],["__scopeId","data-v-4f616005"]]);var en=Ye;const nn=e=>((0,r.dD)("data-v-6ffe08ba"),e=e(),(0,r.Cn)(),e),tn={class:"ipinfo"},on={class:"ipinfo-item"},rn=nn((()=>(0,r._)("h3",null,"IP Address",-1))),an={class:"ipinfo-item"},sn=nn((()=>(0,r._)("h3",null,"Location",-1))),ln={class:"ipinfo-item"},cn=nn((()=>(0,r._)("h3",null,"Timezone",-1))),un={class:"ipinfo-item"},pn=nn((()=>(0,r._)("h3",null,"Isp",-1)));function dn(e,n,t,o,a,s){return(0,r.wg)(),(0,r.iD)("div",tn,[(0,r._)("div",on,[rn,(0,r._)("span",null,(0,i.zw)(t.ipInfo.address),1)]),(0,r._)("div",an,[sn,(0,r._)("span",null,(0,i.zw)(t.ipInfo.state),1)]),(0,r._)("div",ln,[cn,(0,r._)("span",null,(0,i.zw)(t.ipInfo.timezone),1)]),(0,r._)("div",un,[pn,(0,r._)("span",null,(0,i.zw)(t.ipInfo.isp),1)])])}var fn={props:["ipInfo"]};const mn=(0,U.Z)(fn,[["render",dn],["__scopeId","data-v-6ffe08ba"]]);var hn=mn,vn={components:{SearchZone:en,IPInfo:hn},setup(){const e=(0,y.oR)(),n=(0,b.iH)(null);let t,o=(0,b.iH)(null);const a=async()=>{const e=await W();e&&(n.value=e.id)};a(),(0,r.bv)((()=>{const e="https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=3M3Hd2D6IxuQIX5M1hu1",n='<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>';t=Re().map("map").setView([23.6978,120.9605],5),Re().tileLayer(e,{tileSize:512,zoomOffset:-1,minZoom:1,attribution:n,crossOrigin:!0}).addTo(t)}));const s=async e=>{try{const n=`https://geo.ipify.org/api/v1?apiKey=at_s4M0V6vG5cI3AE7S1OTaJ01RjH6hG&ipAddress=${e}`,{data:r}=await $().get(n);o.value={address:r.ip,state:r.location.region,timezone:r.location.timezone,isp:r.isp,lat:r.location.lat,lng:r.location.lng},Re().marker([o.value.lat,o.value.lng]).addTo(t),t.setView([o.value.lat,o.value.lng],13)}catch(n){alert(n.message)}};return{user:(0,r.Fl)((()=>e.state.user)),fbUserID:n,ipInfo:o,getIpInfo:s}}};const gn=(0,U.Z)(vn,[["render",Ae],["__scopeId","data-v-14bab944"]]);var wn=gn;const _n={class:"empty"};function bn(e,n,t,o,a,s){return(0,r.wg)(),(0,r.iD)("div",_n)}var yn={name:"EmptyView",components:{},created(){this.$router.go(-1)}};const kn=(0,U.Z)(yn,[["render",bn]]);var In=kn;const Mn=(0,y.MT)({state:{user:null},mutations:{setUser(e,n){e.user=n?{...e.user,...n}:n}},actions:{},getters:{getUser(e){return e.user}},modules:{}});var Dn=Mn;const Cn=[{path:"/",name:"home",component:ae},{path:"/login",name:"login",component:ye,meta:{guest:!0}},{path:"/profile",name:"profile",component:Ze,meta:{auth:!0}},{path:"/map",name:"map",component:wn,meta:{auth:!0}},{path:"/empty",name:"empty",component:In}],Un=(0,k.p7)({history:(0,k.PO)("/"),routes:Cn});Un.beforeEach((async(e,n,t)=>{const o=e.matched.some((e=>e.meta.auth)),r=e.matched.some((e=>e.meta.guest)),a=await R();Dn.commit("setUser",a),o?a?t():t("/login"):r&&a?t("/"):t()}));var xn=Un;(0,o.ri)(Q).use(Dn).use(xn).mount("#app")}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var a=n[o]={exports:{}};return e[o].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,o,r,a){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],a=e[u][2];for(var i=!0,l=0;l<o.length;l++)(!1&a||s>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[l])}))?o.splice(l--,1):(i=!1,a<s&&(s=a));if(i){e.splice(u--,1);var c=r();void 0!==c&&(n=c)}}return n}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,r,a]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var r,a,s=o[0],i=o[1],l=o[2],c=0;if(s.some((function(n){return 0!==e[n]}))){for(r in i)t.o(i,r)&&(t.m[r]=i[r]);if(l)var u=l(t)}for(n&&n(o);c<s.length;c++)a=s[c],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(u)},o=self["webpackChunkoauth_maps_client"]=self["webpackChunkoauth_maps_client"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(4070)}));o=t.O(o)})();
//# sourceMappingURL=app.1c2c6729.js.map