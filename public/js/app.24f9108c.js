(function(){"use strict";var e={5449:function(e,n,t){var o=t(9242),r=t(3396);const s={class:"container"};function a(e,n,t,o,a,u){const c=(0,r.up)("NavBar"),i=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(c),(0,r._)("div",s,[(0,r.Wm)(i)])],64)}var u=t(7139);const c={class:"navbar"},i={class:"navbar_menu flex"},l={class:"cursor-pointer"},p=(0,r.Uk)("Home"),f={key:0,class:"flex"},h={class:"cursor-pointer"},d=(0,r.Uk)("Login"),m={class:"cursor-pointer"},v=(0,r.Uk)("Map"),g={class:"cursor-pointer"},w=(0,r.Uk)("Profile");function _(e,n,t,o,s,a){const _=(0,r.up)("router-link"),b=(0,r.up)("CloseIcon"),k=(0,r.up)("MenuIcon");return(0,r.wg)(),(0,r.iD)("nav",c,[(0,r._)("div",i,[(0,r._)("ul",{class:(0,u.C_)({navbar_menu_mobile:o.showMobMenu,navbar_menu_pc:!o.showMobMenu})},[(0,r._)("li",l,[(0,r.Wm)(_,{to:"/"},{default:(0,r.w5)((()=>[p])),_:1})]),o.user?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("li",h,[(0,r.Wm)(_,{to:"/login"},{default:(0,r.w5)((()=>[d])),_:1})])])),o.user?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,u.C_)({flex:!o.showMobMenu})},[(0,r._)("li",m,[(0,r.Wm)(_,{to:"/map"},{default:(0,r.w5)((()=>[v])),_:1})]),(0,r._)("li",g,[(0,r.Wm)(_,{to:"/profile"},{default:(0,r.w5)((()=>[w])),_:1})]),(0,r._)("li",null,[(0,r._)("button",{onClick:n[0]||(n[0]=(...e)=>o.handleLogout&&o.handleLogout(...e)),class:"cursor-pointer"},"Logout")]),(0,r._)("li",null,[(0,r._)("span",null,"Hi, "+(0,u.zw)(o.user.name),1)])],2)):(0,r.kq)("",!0)],2),(0,r._)("div",{onClick:n[1]||(n[1]=(...e)=>o.toggleMenu&&o.toggleMenu(...e)),class:"navbar_hamburger"},[o.showMobMenu?((0,r.wg)(),(0,r.j4)(b,{key:0,class:"navbar_icon cursor-pointer"})):((0,r.wg)(),(0,r.j4)(k,{key:1,class:"navbar_icon cursor-pointer"}))])])])}var b=t(4870),k=t(65),y=t(2483);const M={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},C=(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1),j=[C];function x(e,n){return(0,r.wg)(),(0,r.iD)("svg",M,j)}var D=t(89);const U={},O=(0,D.Z)(U,[["render",x]]);var L=O;const I={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},P=(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),H=[P];function Z(e,n){return(0,r.wg)(),(0,r.iD)("svg",I,H)}const R={},W=(0,D.Z)(R,[["render",Z]]);var B=W,F=t(6265),q=t.n(F);const z="http://localhost:3000/";q().create({baseURL:z});const S=q().create({baseURL:z,headers:{"Content-Type":"application/json","Access-Control-Allow-Credentials":!0},withCredentials:!0}),T=async()=>{const{data:e}=await S.get("auth/user");return e.user},$=async()=>{const{data:e}=await S.get("auth/userfb");return e.fbinfo},E=async()=>{await S.get("auth/logout")};var G={components:{MenuIcon:L,CloseIcon:B},setup(){const e=(0,k.oR)(),n=(0,y.tv)(),t=(0,b.iH)(!1),o=async()=>{await E(),e.commit("setUser",null),n.push("/")},s=()=>{t.value=!t.value};return{user:(0,r.Fl)((()=>e.state.user)),showMobMenu:t,handleLogout:o,toggleMenu:s}}};const N=(0,D.Z)(G,[["render",_],["__scopeId","data-v-faad50e0"]]);var A=N,V={components:{NavBar:A}};const Y=(0,D.Z)(V,[["render",a],["__scopeId","data-v-2e1b55f2"]]);var J=Y;const K={class:"home"},Q=(0,r._)("h1",null,"Home",-1),X=[Q];function ee(e,n,t,o,s,a){return(0,r.wg)(),(0,r.iD)("div",K,X)}var ne={name:"HomeView",components:{}};const te=(0,D.Z)(ne,[["render",ee]]);var oe=te;const re=e=>((0,r.dD)("data-v-32196f19"),e=e(),(0,r.Cn)(),e),se={class:"login"},ae=re((()=>(0,r._)("h1",null,"Login",-1))),ue=["href"];function ce(e,n,t,o,s,a){return(0,r.wg)(),(0,r.iD)("div",se,[ae,(0,r._)("a",{class:"btn",href:o.href},"Google Login",8,ue)])}function ie(){const e="https://accounts.google.com/o/oauth2/v2/auth",n={redirect_uri:"http://localhost:3000/auth/sessions/oauth/google",client_id:"431057118212-smdf2hdbkj9ra8g5cghi8envgbr9ptg2.apps.googleusercontent.com",access_type:"offline",response_type:"code",prompt:"consent",scope:["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email"].join(" ")},t=new URLSearchParams(n);return`${e}?${t.toString()}`}var le=ie,pe={setup(){const e=(0,b.iH)(le());return{href:e}}};const fe=(0,D.Z)(pe,[["render",ce],["__scopeId","data-v-32196f19"]]);var he=fe;const de=e=>((0,r.dD)("data-v-66c0d0cc"),e=e(),(0,r.Cn)(),e),me={class:"profile flex"},ve=de((()=>(0,r._)("h1",null,"Profile",-1))),ge={key:0,class:"profile_info flex"},we=["href"],_e=["src","alt"];function be(e,n,t,o,s,a){return(0,r.wg)(),(0,r.iD)("div",me,[ve,o.user?((0,r.wg)(),(0,r.iD)("div",ge,[(0,r._)("a",{class:"btn",href:o.href},"Bind Facebook",8,we),(0,r._)("img",{src:o.user.picture,alt:o.user.name},null,8,_e),(0,r._)("ul",null,[(0,r._)("li",null,"Gmail: "+(0,u.zw)(o.user.email),1),(0,r._)("li",null,"Google name: "+(0,u.zw)(o.user.name),1)])])):(0,r.kq)("",!0)])}function ke(){const e="https://www.facebook.com/v4.0/dialog/oauth",n={redirect_uri:"http://localhost:3000/auth/sessions/oauth/facebook",client_id:"591219129162188",auth_type:"rerequest",response_type:"code",display:"popup",scope:["email","public_profile"].join(",")},t=new URLSearchParams(n);return`${e}?${t.toString()}`}var ye=ke,Me={setup(){const e=(0,k.oR)(),n=(0,b.iH)(ye());return(0,r.bv)((async()=>{const n=await $();if(console.log(n),n){const t={fbName:n.name,fbEmail:n.email,fbPicture:n.picture?.data?.url};e.commit("setUser",t)}})),{user:(0,r.Fl)((()=>e.state.user)),href:n}}};const Ce=(0,D.Z)(Me,[["render",be],["__scopeId","data-v-66c0d0cc"]]);var je=Ce;const xe=e=>((0,r.dD)("data-v-34ebc51e"),e=e(),(0,r.Cn)(),e),De={class:"map flex"},Ue=xe((()=>(0,r._)("h1",null,"Map",-1))),Oe=(0,r.Uk)(" Please bind fb to see more content. ");function Le(e,n,t,o,s,a){const u=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",De,[Ue,(0,r.Wm)(u,{to:"/profile"},{default:(0,r.w5)((()=>[Oe])),_:1})])}var Ie={setup(){const e=(0,k.oR)();return{user:(0,r.Fl)((()=>e.state.user))}}};const Pe=(0,D.Z)(Ie,[["render",Le],["__scopeId","data-v-34ebc51e"]]);var He=Pe;const Ze=(0,k.MT)({state:{user:null},mutations:{setUser(e,n){e.user=n?{...e.user,...n}:n}},actions:{},getters:{getUser(e){return e.user}},modules:{}});var Re=Ze;const We=[{path:"/",name:"home",component:oe},{path:"/login",name:"login",component:he,meta:{guest:!0}},{path:"/profile",name:"profile",component:je,meta:{auth:!0}},{path:"/map",name:"map",component:He,meta:{auth:!0}}],Be=(0,y.p7)({history:(0,y.PO)("/"),routes:We});Be.beforeEach((async(e,n,t)=>{const o=e.matched.some((e=>e.meta.auth)),r=e.matched.some((e=>e.meta.guest)),s=await T();Re.commit("setUser",s),o?s?t():t("/login"):r&&s?t("/"):t()}));var Fe=Be;(0,o.ri)(J).use(Re).use(Fe).mount("#app")}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var s=n[o]={exports:{}};return e[o](s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(n,o,r,s){if(!o){var a=1/0;for(l=0;l<e.length;l++){o=e[l][0],r=e[l][1],s=e[l][2];for(var u=!0,c=0;c<o.length;c++)(!1&s||a>=s)&&Object.keys(t.O).every((function(e){return t.O[e](o[c])}))?o.splice(c--,1):(u=!1,s<a&&(a=s));if(u){e.splice(l--,1);var i=r();void 0!==i&&(n=i)}}return n}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[o,r,s]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var r,s,a=o[0],u=o[1],c=o[2],i=0;if(a.some((function(n){return 0!==e[n]}))){for(r in u)t.o(u,r)&&(t.m[r]=u[r]);if(c)var l=c(t)}for(n&&n(o);i<a.length;i++)s=a[i],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(l)},o=self["webpackChunkoauth_maps_client"]=self["webpackChunkoauth_maps_client"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(5449)}));o=t.O(o)})();
//# sourceMappingURL=app.24f9108c.js.map