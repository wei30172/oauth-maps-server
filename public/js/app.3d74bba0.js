(function(){"use strict";var e={4406:function(e,n,t){var o=t(9242),r=t(3396);const a={class:"container"};function s(e,n,t,o,s,u){const c=(0,r.up)("NavBar"),i=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(c),(0,r._)("div",a,[(0,r.Wm)(i)])],64)}var u=t(7139);const c={class:"navbar"},i={class:"navbar_menu flex"},l={class:"cursor-pointer"},p=(0,r.Uk)("Home"),f={key:0,class:"flex"},d={class:"cursor-pointer"},h=(0,r.Uk)("Login"),m={class:"cursor-pointer"},v=(0,r.Uk)("Map"),g={class:"cursor-pointer"},w=(0,r.Uk)("Profile");function _(e,n,t,o,a,s){const _=(0,r.up)("router-link"),b=(0,r.up)("CloseIcon"),k=(0,r.up)("MenuIcon");return(0,r.wg)(),(0,r.iD)("nav",c,[(0,r._)("div",i,[(0,r._)("ul",{class:(0,u.C_)({navbar_menu_mobile:o.showMobMenu,navbar_menu_pc:!o.showMobMenu})},[(0,r._)("li",l,[(0,r.Wm)(_,{to:"/"},{default:(0,r.w5)((()=>[p])),_:1})]),o.user?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("li",d,[(0,r.Wm)(_,{to:"/login"},{default:(0,r.w5)((()=>[h])),_:1})])])),o.user?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,u.C_)({flex:!o.showMobMenu})},[(0,r._)("li",m,[(0,r.Wm)(_,{to:"/map"},{default:(0,r.w5)((()=>[v])),_:1})]),(0,r._)("li",g,[(0,r.Wm)(_,{to:"/profile"},{default:(0,r.w5)((()=>[w])),_:1})]),(0,r._)("li",null,[(0,r._)("button",{onClick:n[0]||(n[0]=(...e)=>o.handleLogout&&o.handleLogout(...e)),class:"cursor-pointer"},"Logout")]),(0,r._)("li",null,[(0,r._)("span",null,"Hi, "+(0,u.zw)(o.user.name),1)])],2)):(0,r.kq)("",!0)],2),(0,r._)("div",{onClick:n[1]||(n[1]=(...e)=>o.toggleMenu&&o.toggleMenu(...e)),class:"navbar_hamburger"},[o.showMobMenu?((0,r.wg)(),(0,r.j4)(b,{key:0,class:"navbar_icon cursor-pointer"})):((0,r.wg)(),(0,r.j4)(k,{key:1,class:"navbar_icon cursor-pointer"}))])])])}var b=t(4870),k=t(65),y=t(2483);const M={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},D=(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1),U=[D];function C(e,n){return(0,r.wg)(),(0,r.iD)("svg",M,U)}var x=t(89);const j={},I=(0,x.Z)(j,[["render",C]]);var O=I;const L={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},H=(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),Z=[H];function P(e,n){return(0,r.wg)(),(0,r.iD)("svg",L,Z)}const F={},R=(0,x.Z)(F,[["render",P]]);var W=R,$=t(6265),B=t.n($);const q="";B().create({baseURL:q});const z=B().create({baseURL:q,headers:{"Content-Type":"application/json","Access-Control-Allow-Credentials":!0},withCredentials:!0}),S=async()=>{const{data:e}=await z.get("auth/user");return e.user},T=async()=>{const{data:e}=await z.get("auth/userfb");return e.fbinfo},E=async()=>{await z.get("auth/logout")},G=async()=>{await z.get("auth/unbind")};var A={components:{MenuIcon:O,CloseIcon:W},setup(){const e=(0,k.oR)(),n=(0,y.tv)(),t=(0,b.iH)(!1),o=async()=>{await E(),e.commit("setUser",null),n.push("/")},a=()=>{t.value=!t.value};return{user:(0,r.Fl)((()=>e.state.user)),showMobMenu:t,handleLogout:o,toggleMenu:a}}};const N=(0,x.Z)(A,[["render",_],["__scopeId","data-v-faad50e0"]]);var V=N,Y={components:{NavBar:V}};const J=(0,x.Z)(Y,[["render",s],["__scopeId","data-v-2e1b55f2"]]);var K=J;const Q=e=>((0,r.dD)("data-v-87126c7c"),e=e(),(0,r.Cn)(),e),X={class:"home flex"},ee=Q((()=>(0,r._)("h1",null,"Home",-1))),ne=[ee];function te(e,n,t,o,a,s){return(0,r.wg)(),(0,r.iD)("div",X,ne)}var oe={name:"HomeView",components:{}};const re=(0,x.Z)(oe,[["render",te],["__scopeId","data-v-87126c7c"]]);var ae=re;const se=e=>((0,r.dD)("data-v-467d831f"),e=e(),(0,r.Cn)(),e),ue={class:"login flex"},ce=se((()=>(0,r._)("h1",null,"Login",-1))),ie=["href"];function le(e,n,t,o,a,s){return(0,r.wg)(),(0,r.iD)("div",ue,[ce,(0,r._)("a",{class:"btn",href:o.href},"Google Login",8,ie)])}function pe(){const e="https://accounts.google.com/o/oauth2/v2/auth",n={redirect_uri:"https://oauth-maps-vue-app.herokuapp.com/auth/sessions/oauth/google",client_id:"431057118212-smdf2hdbkj9ra8g5cghi8envgbr9ptg2.apps.googleusercontent.com",access_type:"offline",response_type:"code",prompt:"consent",scope:["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email"].join(" ")},t=new URLSearchParams(n);return`${e}?${t.toString()}`}var fe=pe,de={setup(){const e=(0,b.iH)(fe());return{href:e}}};const he=(0,x.Z)(de,[["render",le],["__scopeId","data-v-467d831f"]]);var me=he;const ve=e=>((0,r.dD)("data-v-00e090cf"),e=e(),(0,r.Cn)(),e),ge={class:"profile flex"},we=ve((()=>(0,r._)("h1",null,"Profile",-1))),_e={class:"profile_info flex"},be=["src"],ke=["href"],ye={key:0,class:"profile_info flex"};function Me(e,n,t,a,s,c){return(0,r.wg)(),(0,r.iD)("div",ge,[we,(0,r._)("div",_e,[(0,r.wy)((0,r._)("img",{src:`https://graph.facebook.com/${a.fbUserID}/picture?type=large`,alt:"userpicture"},null,8,be),[[o.F8,a.fbUserID]]),a.fbUserID?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn",onClick:n[0]||(n[0]=(...e)=>a.handleUnbind&&a.handleUnbind(...e))}," Unbind Facebook ")):((0,r.wg)(),(0,r.iD)("a",{key:1,class:"btn",href:a.href},"Bind Facebook",8,ke))]),a.user?((0,r.wg)(),(0,r.iD)("div",ye,[(0,r._)("ul",null,[(0,r._)("li",null,"Gmail: "+(0,u.zw)(a.user.email),1),(0,r._)("li",null,"Google name: "+(0,u.zw)(a.user.name),1)])])):(0,r.kq)("",!0)])}function De(){const e="https://www.facebook.com/v4.0/dialog/oauth",n={redirect_uri:"https://oauth-maps-vue-app.herokuapp.com/auth/sessions/oauth/facebook",client_id:"591219129162188",auth_type:"rerequest",response_type:"code",display:"popup",scope:["email","public_profile"].join(",")},t=new URLSearchParams(n);return`${e}?${t.toString()}`}var Ue=De,Ce={setup(){const e=(0,k.oR)(),n=(0,y.tv)(),t=(0,b.iH)(Ue()),o=(0,b.iH)(null),a=async()=>{const e=await T();e&&(o.value=e.id)};a();const s=async()=>{await G(),n.push({name:"empty"})};return{user:(0,r.Fl)((()=>e.state.user)),fbUserID:o,href:t,handleUnbind:s}}};const xe=(0,x.Z)(Ce,[["render",Me],["__scopeId","data-v-00e090cf"]]);var je=xe;const Ie=e=>((0,r.dD)("data-v-34ebc51e"),e=e(),(0,r.Cn)(),e),Oe={class:"map flex"},Le=Ie((()=>(0,r._)("h1",null,"Map",-1))),He=(0,r.Uk)(" Please bind fb to see more content. ");function Ze(e,n,t,o,a,s){const u=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",Oe,[Le,(0,r.Wm)(u,{to:"/profile"},{default:(0,r.w5)((()=>[He])),_:1})])}var Pe={setup(){const e=(0,k.oR)();return{user:(0,r.Fl)((()=>e.state.user))}}};const Fe=(0,x.Z)(Pe,[["render",Ze],["__scopeId","data-v-34ebc51e"]]);var Re=Fe;const We={class:"empty"};function $e(e,n,t,o,a,s){return(0,r.wg)(),(0,r.iD)("div",We)}var Be={name:"EmptyView",components:{},created(){this.$router.go(-1)}};const qe=(0,x.Z)(Be,[["render",$e]]);var ze=qe;const Se=(0,k.MT)({state:{user:null},mutations:{setUser(e,n){e.user=n?{...e.user,...n}:n}},actions:{},getters:{getUser(e){return e.user}},modules:{}});var Te=Se;const Ee=[{path:"/",name:"home",component:ae},{path:"/login",name:"login",component:me,meta:{guest:!0}},{path:"/profile",name:"profile",component:je,meta:{auth:!0}},{path:"/map",name:"map",component:Re,meta:{auth:!0}},{path:"/empty",name:"empty",component:ze}],Ge=(0,y.p7)({history:(0,y.PO)("/"),routes:Ee});Ge.beforeEach((async(e,n,t)=>{const o=e.matched.some((e=>e.meta.auth)),r=e.matched.some((e=>e.meta.guest)),a=await S();Te.commit("setUser",a),o?a?t():t("/login"):r&&a?t("/"):t()}));var Ae=Ge;(0,o.ri)(K).use(Te).use(Ae).mount("#app")}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var a=n[o]={exports:{}};return e[o](a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,o,r,a){if(!o){var s=1/0;for(l=0;l<e.length;l++){o=e[l][0],r=e[l][1],a=e[l][2];for(var u=!0,c=0;c<o.length;c++)(!1&a||s>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[c])}))?o.splice(c--,1):(u=!1,a<s&&(s=a));if(u){e.splice(l--,1);var i=r();void 0!==i&&(n=i)}}return n}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[o,r,a]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var r,a,s=o[0],u=o[1],c=o[2],i=0;if(s.some((function(n){return 0!==e[n]}))){for(r in u)t.o(u,r)&&(t.m[r]=u[r]);if(c)var l=c(t)}for(n&&n(o);i<s.length;i++)a=s[i],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(l)},o=self["webpackChunkoauth_maps_client"]=self["webpackChunkoauth_maps_client"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(4406)}));o=t.O(o)})();
//# sourceMappingURL=app.3d74bba0.js.map